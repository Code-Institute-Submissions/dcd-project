{% extends 'base.html' %}

{% block content %}

<!-- editform section -->
<section class="container-fluid editform-container">
    <div class="row">
        <div class="col-12">

            {% if collection %}

            <form action="{{ url_for('update_recipe', db_id=recipe._id) }}" method="POST">
                <div class="form-group">
                    <label for="title">Title</label>
                    <input type="text" class="form-control" id="title" name="title" value="{{recipe.title}}" required>
                </div>

                <div class="form-group">
                    <label for="category">Category</label>
                    <select class="form-control" id="category" name="category" required>
                        <option selected>{{recipe.category}}</option>
                        {% for category in collection %}
                        <option>{{category.name}}</option>
                        {% endfor %}
                    </select>
                </div>

                <p>Please use Enter to separate ingredients from each other!</p>

                <div class="form-group">
                    <label for="ingredients">Ingredients</label>
                    <textarea class="form-control" id="ingredients" name="ingredients" rows="3"
                        required>{{recipe.ingredients|join('\n')}}</textarea>
                </div>

                <p>Please use Enter to separate method steps from each other!</p>

                <div class="form-group">
                    <label for="method">Method</label>
                    <textarea class="form-control" id="method" name="method" rows="3"
                        required>{{recipe.method|join('\n')}}</textarea>
                </div>

                <p>Please choose from the following appliances:</p>

                {% for category in categories %}

                <div class="form-check-inline">
                    <label class="form-check-label" for="id_{{category._id}}">
                        <input type="checkbox" class="form-check-input" id="id_{{category._id}}"
                            name="appliance_categories" value="{{category.name}}"
                            {% if category.name in recipe.appliances %}checked{% endif %}>{{category.name}}
                    </label>
                </div>

                {% endfor %}

                <div class="form-group">
                    <label for="img_link">Image URL</label>
                    <input type="text" class="form-control" id="img_link" name="img_link" value="{{recipe.img_link}}"
                        required>
                </div>

                <div class="form-group">
                    <label for="servings">Servings</label>
                    <input type="number" class="form-control" id="servings" name="servings" value="{{recipe.servings}}"
                        required>
                </div>

                <button type="submit" name="action" class="btn btn-primary btn--orange">Update recipe</button>
            </form>

            {% else %}

            <form action="{{ url_for('update_recipe_category', db_id=recipe_category._id) }}" method="POST">
                <div class="form-group">
                    <label for="name">Category name</label>
                    <input type="text" class="form-control" id="name" name="name" value="{{recipe_category.name}}"
                        required>
                </div>

                <div class="form-group">
                    <label for="img_link">Image URL</label>
                    <input type="text" class="form-control" id="img_link" name="img_link"
                        value="{{recipe_category.img_link}}" required>
                </div>

                <button type="submit" name="action" class="btn btn-primary btn--orange">Update category</button>
            </form>

            {% endif %}

        </div>
    </div>
</section>

{% endblock %}